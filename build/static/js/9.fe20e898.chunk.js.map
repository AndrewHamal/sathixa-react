{"version":3,"sources":["pages/rider/Inbox.js"],"names":["TabPane","Tabs","callback","key","console","log","Content","Layout","locale","prevText","nextText","Inbox","useHistory","useState","packages","setPackage","loading","setLoading","lastPage","setLast","pages","setPages","isVendor","useSelector","vendorAuth","isRider","isAuthRider","getPackage","page","getPackages","then","res","data","last_page","current_page","useEffect","onGoingPackage","className","style","padding","marginTop","active","position","zIndex","width","title","defaultActiveKey","onChange","tab","length","image","Empty","PRESENTED_IMAGE_SIMPLE","map","i","to","id","package","new_chat","dot","backgroundColor","verticalAlign","shape","size","gap","vendor","first_name","charAt","rider","lineHeight","last_name","receiver_name","chat_last","message","substring","moment","created_at","fromNow","total","current","e","src","alt"],"mappings":"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","file":"static/js/9.fe20e898.chunk.js","sourcesContent":["import { Link, useHistory } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { getPackages } from \"@/api/vendor\";\nimport { onGoingPackage } from \"@/api/rider/index\"\nimport { Layout, PageHeader, Tabs, Skeleton, Badge, Empty } from \"antd\";\nimport { Pagination } from \"antd-mobile\"\nimport { vendorAuth } from '@/reducers/reducers'\nimport { isAuthRider } from \"@/reducers/rider/reducers\"\nimport { useSelector } from \"react-redux\";\nimport moment from 'moment'\nimport Avatar from \"antd/lib/avatar/avatar\";\n\nconst { TabPane } = Tabs;\n\nfunction callback(key) {\n  console.log(key);\n}\n\nconst { Content } = Layout;\n\nconst locale = {\n  prevText: 'Prev',\n  nextText: 'Next',\n};\n\nconst Inbox = () => {\n  const history = useHistory();\n  const [packages, setPackage] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [lastPage, setLast] = useState(1)\n  const [pages, setPages] = useState(1)\n\n  const isVendor = useSelector(vendorAuth)\n  const isRider = useSelector(isAuthRider)\n\n  function getPackage(page) {\n    getPackages('', page, 1)\n    .then(res => {\n      console.log(res?.data?.last_page)\n      setPackage(res?.data)\n      setLast(res?.data?.last_page)\n      setPages(res?.data?.current_page)\n      setLoading(false)\n    })\n  }\n\n  function onGoingPackages(page) {\n    onGoingPackage(page)\n    .then(res => {\n      setPackage(res.data)\n      setLoading(false)\n    })\n  }\n\n  useEffect(() => {\n    if(isVendor) {\n      getPackage(1) \n    }\n\n    if(isRider) {\n      onGoingPackages(1)\n    }\n  }, [isRider, isVendor])\n  \n  if(loading) { return <Content\n    className=\"site-layout\"\n    style={{\n      padding: \"0 14px\",\n      marginTop: 60,\n    }}\n  > <Skeleton active/></Content> }\n\n  return (\n    <Layout>\n      <PageHeader\n        style={{ position: \"fixed\", zIndex: 1, width: \"100%\" }}\n        className=\"site-page-header bg-red \"\n        title=\"Inbox\"\n      />\n\n      <Content\n        className=\"site-layout\"\n        style={{\n          padding: \"0 14px\",\n          marginTop: 60,\n        }}\n      >\n        <div className=\"site-layout-background\">\n          <Tabs defaultActiveKey=\"1\" onChange={callback}>\n            <TabPane tab=\"Messages\" key=\"1\" className=\"mt-2\">\n              {\n                packages.data.length === 0 ?\n                  <Empty image={Empty.PRESENTED_IMAGE_SIMPLE}></Empty>\n                :\n                packages.data.map((res, i) => (\n                  <Link to={`/chat/${isVendor ? res?.id : res?.package?.id}`}  key={i}>\n                    <div className=\"d-flex mb-3\">\n\n                      {\n                        res.new_chat ? \n                        <Badge dot className=\"my-auto\">\n                          <Avatar className=\"text-capitalize\" style={{ backgroundColor: '#f56a00', verticalAlign: 'center' }} shape=\"square\" size=\"large\" gap={1}>\n                            {  isRider ?\n                              res?.package?.vendor?.first_name.charAt(0)  :\n                              res?.rider?.first_name.charAt(0)\n                            }\n                          </Avatar>\n                        </Badge> : \n                         <Avatar className=\"my-auto text-capitalize\" style={{ backgroundColor: '#f56a00', verticalAlign: 'center' }} shape=\"square\" size=\"large\" gap={1}>\n                           {  isRider ?\n                             res?.package?.vendor?.first_name.charAt(0)  :\n                             res?.rider?.first_name.charAt(0)\n                           }\n                         </Avatar>\n                      }\n\n                      <div className=\"ml-2 d-flex flex-wrap\">\n                        <div>\n                          {\n                            isRider ?\n                            <p className=\"message-heading text-capitalize\" style={{lineHeight:'13px'}}>{res?.package?.vendor?.first_name} {res?.package?.vendor?.last_name}</p> :\n                            <p className=\"message-heading text-capitalize\" style={{lineHeight:'13px'}}>{res?.receiver_name}</p>\n                            // {res?.rider?.first_name} {res?.rider?.last_name}  \n                          }\n                        \n                          <p className=\"message-desc w-100\">\n                            { res?.chat_last?.message.substring(0, 50)+' ...' || '....' }\n                          </p>\n                        </div>\n                        <p className=\"message-time w-100\">{ moment(res?.chat_last?.created_at || res?.created_at).fromNow(true) }</p>\n                      </div>\n                    </div>\n                  </Link>\n                ))\n              }\n\n              {\n              lastPage > 1 ?\n                <Pagination \n                    total={lastPage} \n                    current={pages} \n                    locale={locale} \n                    onChange={e => getPackage(e)}\n                /> : null\n\n              }\n   \n\n            </TabPane>\n           \n            <TabPane tab=\"Notifications\" key=\"2\">\n              <div className=\" d-flex \">\n                <div className=\"bell-border  d-flex\">\n                  <i className=\"far fa-bell m-auto\" />\n                </div>\n                <div className=\"ml-2 my-auto\">\n                  <p className=\"notif-heading\">\n                    Rider has requested to deliver your your package\n                  </p>\n                  <span className=\"notif-time\">3 min ago</span>\n                </div>\n              </div>\n\n              <div className=\"  d-flex my-3 \">\n                <div className=\"bell-border  d-flex\">\n                  <i className=\"far fa-bell m-auto\" />\n                </div>\n                <div className=\"ml-2 my-auto\">\n                  <p className=\"notif-heading\">please verify your details</p>\n                  <span className=\"notif-time\">5 min ago</span>\n                </div>\n              </div>\n              <div className=\"  d-flex my-3 \">\n                <div className=\"bell-border  d-flex\">\n                  <i className=\"far fa-bell m-auto\" />\n                </div>\n                <div className=\"ml-2 my-auto\">\n                  <p className=\"notif-heading\">\n                    Welcome to Satichha Sangit sir\n                  </p>\n                  <span className=\"notif-time\">10 min ago</span>\n                </div>\n              </div>\n              <div className=\" d-flex my-3 \">\n                <div className=\"bell-border  d-flex\">\n                  <i className=\"far fa-bell m-auto\" />\n                </div>\n\n                <div className=\"ml-2 my-auto\">\n                  <p className=\"notif-heading\">नयाँ बर्ष २०७८ को शुभकामना</p>\n                  <span className=\"notif-time\">10 min ago</span>\n\n                  \n                  <p className=\"font-14 mt-4\">\n                    नयाँ बर्ष २०७८ को शुभकामना – यस ब्लगमा नयाँ बर्षको शुभकामना\n                    तथा SMS को फोटोहरु र सन्देसहरु राखेको छु। आशा\n                  </p>\n                  <img\n                    src=\"https://1.bp.blogspot.com/-eYsS8ZkoBlI/YEPdPzCjDyI/AAAAAAAAZ5c/HUN5cZq4E50WXEUWu98d-ndVXwi9AuTJwCLcBGAsYHQ/s1662/Happy%2BNew%2BYear%2B2078%2BImages%2B%25286%2529.jpg\"\n                    alt=\"\"\n                    className=\" mt-2 img-fluid\"\n                  />\n                </div>\n              </div>\n            </TabPane>\n          </Tabs>\n        </div>\n      </Content>\n    </Layout>\n  );\n};\n\nexport default Inbox;\n"],"sourceRoot":""}