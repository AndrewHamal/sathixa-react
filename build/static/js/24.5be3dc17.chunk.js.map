{"version":3,"sources":["pages/rider/DocumentsRider.js"],"names":["DocumentsRider","history","useHistory","dispatch","useDispatch","userSelector","useSelector","getUser","useState","loader","setLoader","license","setFileLicense","idProof","setFileIdProof","insurance","setFileInsurance","Content","Layout","getProfile","profile","then","res","storeUser","data","driver_license","id_proof","useEffect","propsLicense","name","action","process","defaultFileList","headers","authorization","localStorage","getItem","onPreview","info","window","open","onRemove","files","file","removeLicense","uid","Toast","success","message","onChange","newFile","concat","status","error","propsID","removeID","propsInsurance","removeInsurance","className","style","padding","marginTop","active","position","zIndex","width","onBack","goBack","title","accept","listType","icon"],"mappings":"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","file":"static/js/24.5be3dc17.chunk.js","sourcesContent":["import { useHistory } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { Layout, Upload, PageHeader, Button, Skeleton, message } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport { profile, removeLicense, removeID, removeInsurance } from \"@/api/rider/index\";\nimport { storeUser, getUser } from \"@/reducers/rider/reducers\"\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Toast } from \"antd-mobile\";\n\n\nconst DocumentsRider = () => {\nconst history = useHistory();\nconst dispatch = useDispatch();\nconst userSelector = useSelector(getUser);\nconst [loader, setLoader] = useState(true);\nconst [license, setFileLicense] = useState([]);\nconst [idProof, setFileIdProof] = useState([]);\nconst [insurance, setFileInsurance] = useState([]);\n\nconst { Content } = Layout;\n\nuseEffect(() => {\n\n  if(userSelector === null ){\n    getProfile();\n  }else{\n    setLoader(false)\n    setFileLicense(userSelector?.driver_license || [])\n    setFileIdProof(userSelector?.id_proof || [])\n    setFileInsurance(userSelector?.insurance || [])\n  }\n\n// eslint-disable-next-line react-hooks/exhaustive-deps\n}, [dispatch, userSelector])\n\nfunction getProfile(){\n  profile()\n  .then(res => {\n    dispatch(storeUser(res.data) || []);\n    setFileLicense(res?.data?.driver_license || [])\n    setFileIdProof(res?.data?.id_proof || [])\n    setFileInsurance(res?.data?.insurance || [])\n    setLoader(false)\n  })\n}\n\nconst propsLicense = {\n  name: \"file\",\n  action: process.env.REACT_APP_API_URL+'api/rider/license',\n  defaultFileList:license,\n  headers: {\n    authorization:'Bearer ' + localStorage.getItem('_riderToken'),\n  },\n  onPreview(info){\n    window.open(info.name, '_blank');\n  },\n  onRemove(files, file) {\n    if(typeof files !== \"undefined\"){\n      removeLicense(files.uid)\n      .then(res => {\n        getProfile();\n        Toast.success(res.data.message)\n      })\n    }\n  },\n  onChange(info) {\n    let newFile = info.file\n    if(license !== null)\n      setFileLicense(license.concat([newFile]))\n\n    if (info.file.status === 'done') {\n      message.success(`${info.file.name} file uploaded successfully`);\n      getProfile();\n    } else if (info.file.status === 'error') {\n      message.error(`${info.file.name} file upload failed.`);\n    }\n  },\n};\n\nconst propsID = {\n  name: \"file\",\n  action: process.env.REACT_APP_API_URL+'api/rider/photo-proof',\n  headers: {\n    authorization:'Bearer ' + localStorage.getItem('_riderToken'),\n  },\n  onPreview(info){\n    window.open(info.name, '_blank');\n  },\n  onRemove(files, file) {\n    if(typeof files !== \"undefined\"){\n      removeID(files.uid)\n      .then(res => {\n        getProfile();\n        Toast.success(res.data.message)\n      })\n    }\n  },\n  onChange(info) {\n    let newFile = info.file\n    if(idProof !== null)\n      setFileIdProof(idProof.concat([newFile]))\n\n    if (info.file.status === 'done') {\n      message.success(`${info.file.name} file uploaded successfully`);\n      getProfile();\n    } else if (info.file.status === 'error') {\n      message.error(`${info.file.name} file upload failed.`);\n    }\n  },\n};\n\nconst propsInsurance = {\n  name: \"file\",\n  action: process.env.REACT_APP_API_URL+'api/rider/insurance',\n  headers: {\n    authorization:'Bearer ' + localStorage.getItem('_riderToken'),\n  },\n  onPreview(info){\n    window.open(info.name, '_blank');\n  },\n  onRemove(files, file) {\n    if(typeof files !== \"undefined\"){\n      removeInsurance(files.uid)\n      .then(res => {\n        getProfile();\n        Toast.success(res.data.message)\n      })\n    }\n  },\n  onChange(info) {\n    let newFile = info.file\n    if(insurance !== null)\n      setFileInsurance(insurance.concat([newFile]))\n\n    if (info.file.status === 'done') {\n      message.success(`${info.file.name} file uploaded successfully`);\n      getProfile();\n    } else if (info.file.status === 'error') {\n      message.error(`${info.file.name} file upload failed.`);\n    }\n  },\n};\n\nif(loader) { return <Content\n  className=\"site-layout\"\n  style={{\n    padding: \"0 14px\",\n    marginTop: 60,\n  }}\n> <Skeleton active/></Content> }\n\n  return (\n    <Layout>\n      <PageHeader\n        style={{ position: \"fixed\", zIndex: 1, width: \"100%\" }}\n        className=\"site-page-header bg-red \"\n        onBack={() => history.goBack()}\n        title=\"Documents\"\n      />\n      <Content\n        className=\"site-layout\"\n        style={{\n          padding: \"0 14px\",\n          marginTop: 67,\n        }}\n      >\n        <div className=\"site-layout-background my-3\">\n          <div className=\"white-card mt-3\">\n            <div className=\"d-flex mb-3\">\n              <i className=\"fas fa-id-badge text-red my-auto mr-2 fa-sm\" />\n              <p className=\"text-normal\">Driving Licence</p>\n            </div>\n            <Upload \n              accept={'image/*'}\n              listType=\"picture\"\n              {...propsLicense}\n            >\n              <Button icon={<UploadOutlined />}>Click to Upload</Button>\n            </Upload>\n          </div>\n\n          <div className=\"white-card mt-3\">\n            <div className=\"d-flex mb-3\">\n              <i className=\"fas fa-id-card-alt text-red my-auto mr-2 fa-sm\" />\n              <p className=\"text-normal\">Photo ID Proof (Optional)</p>\n            </div>\n            <Upload \n              accept={'image/*'}\n              listType=\"picture\"\n              defaultFileList={idProof}\n              {...propsID}\n            >\n              <Button icon={<UploadOutlined />}>Click to Upload</Button>\n            </Upload>\n          </div>\n          <p className=\"text-normal mt-4 f-w-600\">Vehicle Requirements</p>\n          <div className=\"white-card mt-2 \">\n            <div className=\"d-flex mb-3\">\n              <i className=\"fas fa-motorcycle text-red my-auto mr-2 fa-sm\" />\n              <p className=\"text-normal\">Vehicle Insurance</p>\n            </div>\n            <Upload \n              accept={'image/*'}\n              listType=\"picture\"\n              defaultFileList={insurance}\n              {...propsInsurance}\n            >\n              <Button icon={<UploadOutlined />}>Click to Upload</Button>\n            </Upload>\n          </div>\n        </div>\n      </Content>\n    </Layout>\n  );\n};\n\nexport default DocumentsRider;\n"],"sourceRoot":""}